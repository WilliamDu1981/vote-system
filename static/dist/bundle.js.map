{"version":3,"sources":["CandidateView.js","main.js","VoteView.js"],"names":[],"mappings":";;AAAA,IAAI,SAAJ,CAAc,eAAd,EAA+B;AAC7B,m7DAD6B;AAmD7B,MAnD6B,kBAmDvB;AACJ,WAAO;AACL,gBAAS,EADJ;AAEL,cAAO,EAFF;AAGL,aAAM;AAHD,KAAP;AAKD,GAzD4B;;AA0D7B,WAAQ;AACN,YADM,sBACI;AACR,UAAI,QAAM,IAAV;AACA,UAAI,SAAO;AACT,kBAAS,KAAK,QADL;AAET,gBAAO,KAAK,MAFH;AAGT,eAAM,KAAK;AAHF,OAAX;AAKA,WAAK,KAAL,CAAW,IAAX,CAAgB,YAAhB,EAA6B,MAA7B,EACG,IADH,CACQ,UAAU,IAAV,EAAgB;AACpB,gBAAQ,GAAR,CAAY,IAAZ;AACA,cAAM,KAAN;AACA,cAAM,UAAN;AACD,OALH,EAMG,KANH,CAMS,YAAY;AACjB,cAAM,aAAN;AACD,OARH;AASA,WAAK,IAAL,CAAU,OAAV;AACD,KAlBK;AAmBN,SAnBM,mBAmBC;AACL,WAAK,QAAL,GAAc,EAAd;AACA,WAAK,MAAL,GAAY,EAAZ;AACA,WAAK,KAAL,GAAW,EAAX;AACD;AAvBK;AA1DqB,CAA/B;;;ACAA,CAAC,YAAY;AACX,MAAI,SAAO,IAAI,SAAJ,EAAX;;AAEA,SAAO,gBAAP,CAAwB,kBAAxB,EAA2C,YAAY;AACrD,WAAO,GAAP,CAAW;AACT,WAAI;AACF,cAAK,MADH;AAEF,mBAAU,IAAI,SAAJ,CAAc,UAAd;AAFR,OADK;AAKT,oBAAa;AACX,cAAK,WADM;AAEX,mBAAU,IAAI,SAAJ,CAAc,eAAd;AAFC;AALJ,KAAX;;AAWA,WAAO,KAAP,CAAa,EAAb,EAAgB,MAAhB;AACD,GAbD;AAcD,CAjBD;;;ACAA,IAAI,SAAJ,CAAc,UAAd,EAAyB;AACvB,sjCADuB;AAgCvB,MAhCuB,kBAgCjB;AACJ,WAAO;AACL,kBAAW,EADN;AAEL,wBAAiB;AAFZ,KAAP;AAID,GArCsB;;AAsCvB,SAAM;AACJ,QADI,kBACE;AACJ,aAAO,KAAK,KAAL,EAAP;AACD;AAHG,GAtCiB;AA2CvB,WAAQ;AACN,SADM,mBACC;AACL,aAAO,KAAK,KAAL,CAAW,GAAX,CAAe,YAAf,EACJ,IADI,CACC,UAAU,IAAV,EAAgB;AACpB,aAAK,UAAL,GAAgB,KAAK,IAArB;AACA,eAAO,EAAP;AACD,OAJI,CAAP;AAKD,KAPK;AAQN,QARM,gBAQD,SARC,EAQS;AACb,UAAI,QAAM,IAAV;;;AAGA,WAAK,gBAAL,GAAsB,IAAtB;;AAEA,WAAK,KAAL,CAAW,GAAX,CAAe,gBAAc,UAAU,GAAxB,GAA4B,OAA3C,EACG,IADH,CACQ,UAAU,IAAV,EAAgB;AACpB,kBAAU,KAAV,GAAgB,KAAK,IAAL,CAAU,KAA1B;AACA,mBAAW,YAAY;AACrB,gBAAM,gBAAN,GAAuB,KAAvB;AACD,SAFD,EAEE,IAFF;AAGD,OANH;AAOD;AArBK;AA3Ce,CAAzB","file":"bundle.js","sourcesContent":["Vue.component('CandidateView', {\r\n  template: `\r\n    <div class=\"container\">\r\n      <validator name=\"form\">\r\n        <div class=\"row\"> \r\n          <div class=\"col-md-6 col-md-offset-3\">\r\n            <form novalidate class=\"panel panel-success\" @submit.prevent=\"onSubmit\">\r\n              <div class=\"panel-heading\">\r\n              <h4>添加候选人</h4>\r\n              </div>\r\n              <div class=\"panel-body\">\r\n                <div class=\"input-group\" style=\"width: 100%;\">\r\n                  <input type=\"text\" \r\n                    name=\"realName\" \r\n                    class=\"form-control\" \r\n                    v-model=\"realName\"\r\n                    v-validate:realName=\"{required:true,minlength:2,maxlength:10}\" \r\n                    placeholder=\"姓名\">\r\n                </div>\r\n                \r\n                <div class=\"input-group\" style=\"width: 100%;\">\r\n                  <input type=\"text\" \r\n                    name=\"slogan\" \r\n                    class=\"form-control\" \r\n                    v-model=\"slogan\"\r\n                    v-validate:slogan=\"{required:true,minlength:2,maxlength:100}\" \r\n                    placeholder=\"口号\">\r\n                </div>\r\n                \r\n                <div class=\"input-group\" style=\"width: 100%;\">\r\n                  <input type=\"color\" \r\n                    name=\"color\" \r\n                    class=\"form-control\" \r\n                    v-model=\"color\"\r\n                    placeholder=\"柱状图背景色\">\r\n                </div>\r\n                \r\n                <div class=\"input-group margin-top\" style=\"width: 100%;\">\r\n                  <button type=\"submit\" :disabled=\"$form.invalid\" class=\"btn btn-block btn-success\">立即添加</button>\r\n                </div>\r\n                \r\n                <div class=\"input-group margin-top\" style=\"width: 100%;\">\r\n                  <button type=\"reset\" class=\"btn btn-block\">重置</button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </validator>\r\n    </div> \r\n  `,\r\n  data(){\r\n    return {\r\n      realName:'',\r\n      slogan:'',\r\n      color:''\r\n    }\r\n  },\r\n  methods:{\r\n    onSubmit(){\r\n      var _this=this;\r\n      var params={\r\n        realName:this.realName,\r\n        slogan:this.slogan,\r\n        color:this.color\r\n      };\r\n      this.$http.post('/candidate',params)\r\n        .then(function (resp) {\r\n          console.log(resp);\r\n          _this.reset();\r\n          alert('添加候选人成功!');\r\n        })\r\n        .catch(function () {\r\n          alert('添加候选人失败，请重试');\r\n        });\r\n      this.$log('$data');\r\n    },\r\n    reset(){\r\n      this.realName='';\r\n      this.slogan='';\r\n      this.color='';\r\n    }\r\n  }\r\n});\r\n","(function () {\r\n  var router=new VueRouter();\r\n  \r\n  window.addEventListener('DOMContentLoaded',function () {\r\n    router.map({\r\n      '/':{\r\n        name:'vote',\r\n        component:Vue.component('VoteView')\r\n      },\r\n      '/candidate':{\r\n        name:'candidate',\r\n        component:Vue.component('CandidateView')\r\n      }\r\n    });\r\n\r\n    router.start({},'#app');\r\n  });\r\n})();\r\n","Vue.component('VoteView',{\r\n  template:`\r\n    <div class=\"container\">\r\n      <div class=\"panel panel-success\">\r\n         <div class=\"panel-heading\"><h4>投票</h4></div>\r\n         <div class=\"panel-body\">\r\n          <table class=\"table table-bordered table-striped table-hover\">\r\n            <thead>\r\n              <th>姓名</th>\r\n              <th>口号</th>\r\n              <th>颜色</th>\r\n              <th>票数</th>\r\n              <th>投票</th>\r\n            </thead>\r\n            <tr v-for=\"candidate of candidates\">\r\n               <td>{{candidate.realName}}</td>\r\n               <td>{{candidate.slogan}}</td>\r\n               <td :style=\"{background:candidate.color}\"></td>\r\n               <td><strong style=\"font-size: 18px;\">{{candidate.votes}}</strong></td>\r\n               <td>\r\n                 <button class=\"btn btn-success btn-sm\" \r\n                  :disabled=\"disableAllButton\"\r\n                  @click=\"vote(candidate)\">\r\n                    投 {{candidate.realName}} 一票\r\n                 </button>\r\n               </td>\r\n            </tr>\r\n          </table>\r\n         </div>\r\n      </div>\r\n    </div>\r\n  `,\r\n  data(){\r\n    return {\r\n      candidates:[],\r\n      disableAllButton:false\r\n    }\r\n  },\r\n  route:{\r\n    data(){\r\n      return this.fetch();\r\n    }\r\n  },\r\n  methods:{\r\n    fetch(){\r\n      return this.$http.get('/candidate')\r\n        .then(function (resp) {\r\n          this.candidates=resp.data;\r\n          return {};\r\n        });\r\n    },\r\n    vote(candidate){\r\n      var _this=this;\r\n\r\n      //点击投票后，禁用所有按钮，以防误点\r\n      this.disableAllButton=true;\r\n\r\n      this.$http.put('/candidate/'+candidate._id+'/vote')\r\n        .then(function (resp) {\r\n          candidate.votes=resp.data.votes;\r\n          setTimeout(function () {\r\n            _this.disableAllButton=false;\r\n          },1000);\r\n        });\r\n    }\r\n  }\r\n});"],"sourceRoot":"/source/"}